<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Friend Finder</title>

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="materialize/css/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css"/>
  <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
</head>
<body>

  <div id="index-banner" class="parallax-container">
    <div class="section no-pad-bot">
      <div class="container">
        <br>
        <br>
        <h1 class="header center grey-text text-lighten-5 thick">Survey</h1>
        <div class="row center">
          <h5 class="header col s12 grey-text text-lighten-5">Answer the questions asbest you can, and we'll find some great minds who think alike</h5>
        </div>
      </div>
    </div>
    <div class="parallax"><img class="responsive-img" src="images/partySweden.jpg" alt="Festival crowd at night"></div>
  </div>

  <div class="container">
    <div class="section">
      <!--   Icon Section   -->
      <div class="row">
        <form class="col s12">
          <div class="row">
            <h3>Your Profile Info</h3>
            <div class="input-field col s6">
              <input id="first_name" type="text" class="form-control">
              <label for="first_name">First Name</label>
            </div>
            <div class="input-field col s6">
              <input id="last_name" type="text" class="form-control">
              <label for="last_name">Last Name</label>
            </div>
          </div>
          <div class="row">
            <div class="input-field col s12">
              <input id="picture" type="text" class="form-control">
              <label for="password">Paste a link here to your favorite selfie! (image URL required)</label>
            </div>
          </div>
          <div class="row">
            <div class="input-field col s12">
              <input id="fun_fact" type="text" class="form-control">
              <label for="funfact">Fun Fact about you! (optional)</label>
            </div>
          </div>
        <div class="row">
            <h3 class="surveyHeaderFix">Multiple Choice</h3>
          <div class="input-field col s12">
            <select class="chosen-select" id="profQone">
              <option value="" disabled selected></option>
              <option value="1">work with my hands.</option>
              <option value="2">use my creativity.</option>
              <option value="3">work on the road.</option>
              <option value="4">lead a team.</option>
              <option value="5">do nothing at all.</option>
            </select>
            <label>If I could do anything I want for a living, I'd choose to... </label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <select class="chosen-select" id="profQtwo">
              <option value="" disabled selected></option>
              <option value="1">beach.</option>
              <option value="2">mountains.</option>
              <option value="3">forest.</option>
              <option value="4">city.</option>
              <option value="5">suburbs.</option>
            </select>
            <label>If I could live anywhere in the world, I'd aim for the... </label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <select class="chosen-select" id="profQthree">
              <option value="" disabled selected></option>
              <option value="1">music.</option>
              <option value="2">scuplture.</option>
              <option value="3">dance.</option>
              <option value="4">painting.</option>
              <option value="5">film.</option>
            </select>
            <label>The most fascinating artistic medium is... </label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <select class="chosen-select" id="profQfour">
              <option value="" disabled selected></option>
              <option value="1">learning code and developing software.</option>
              <option value="2">some form of martial arts.</option>
              <option value="3">vocational skills such as electrical work and automechanics.</option>
              <option value="4">learning a new musical instrument.</option>
              <option value="5">all of the books collecting dust on my bookcase.</option>
            </select>
            <label>If I was given enough money to spend a full month studying whatever I want, I'd focus on... </label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <select class="chosen-select" id="profQfive">
              <option value="" disabled selected></option>
              <option value="1">at a concert.</option>
              <option value="2">visiting a museum.</option>
              <option value="3">hitting up the stadium to see my favorite sports team.</option>
              <option value="4">catching up on work.</option>
              <option value="5">doing nothing.</option>
            </select>
            <label>I'd prefer to spend my weekend... </label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <select class="chosen-select" id="profQsix">
              <option value="" disabled selected></option>
              <option value="1">Asia.</option>
              <option value="2">Europe.</option>
              <option value="3">Africa.</option>
              <option value="4">Australia.</option>
              <option value="5">South America.</option>
            </select>
            <label>If I could vacation anywhere next week for free, I'd travel to... </label>
          </div>
        </div>
        <div class="row">
          <h3 class="surveyHeaderFix">On a Scale of 1 to 5...</h3>
          <div class="input-field col s12">
            <select class="chosen-select" id="survQone">
              <option value="" disabled selected></option>
              <option value="1">1 (strongly disagree)</option>
              <option value="2">2</option>
              <option value="3">3 (meh)</option>
              <option value="4">4</option>
              <option value="5">5 (strongly agree)</option>
            </select>
            <label>I'd much rather be outdoors than cramped inside.</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <select class="chosen-select" id="survQtwo">
              <option value="" disabled selected></option>
              <option value="1">1 (strongly disagree)</option>
              <option value="2">2</option>
              <option value="3">3 (meh)</option>
              <option value="4">4</option>
              <option value="5">5 (strongly agree)</option>
            </select>
            <label>I'm a big fan of video games.</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <select class="chosen-select" id="survQthree">
              <option value="" disabled selected></option>
              <option value="1">1 (strongly disagree)</option>
              <option value="2">2</option>
              <option value="3">3 (meh)</option>
              <option value="4">4</option>
              <option value="5">5 (strongly agree)</option>
            </select>
            <label>I don't like eating meat.</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <select class="chosen-select" id="survQfour">
              <option value="" disabled selected></option>
              <option value="1">1 (strongly disagree)</option>
              <option value="2">2</option>
              <option value="3">3 (meh)</option>
              <option value="4">4</option>
              <option value="5">5 (strongly agree)</option>
            </select>
            <label>I don't really care about politics.</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <select class="chosen-select" id="survQfive">
              <option value="" disabled selected></option>
              <option value="1">1 (strongly disagree)</option>
              <option value="2">2</option>
              <option value="3">3 (meh)</option>
              <option value="4">4</option>
              <option value="5">5 (strongly agree)</option>
            </select>
            <label>It's really hard to offend or upset me. </label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <select class="chosen-select" id="survQsix">
              <option value="" disabled selected></option>
              <option value="1">1 (strongly disagree)</option>
              <option value="2">2</option>
              <option value="3">3 (meh)</option>
              <option value="4">4</option>
              <option value="5">5 (strongly agree)</option>
            </select>
            <label>I love dogs!</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <select class="chosen-select" id="survQseven">
              <option value="" disabled selected></option>
              <option value="1">1 (strongly disagree)</option>
              <option value="2">2</option>
              <option value="3">3 (meh)</option>
              <option value="4">4</option>
              <option value="5">5 (strongly agree)</option>
            </select>
            <label>I love cats!</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <select class="chosen-select" id="survQeight">
              <option value="" disabled selected></option>
              <option value="1">1 (strongly disagree)</option>
              <option value="2">2</option>
              <option value="3">3 (meh)</option>
              <option value="4">4</option>
              <option value="5">5 (strongly agree)</option>
            </select>
            <label>There's too many billionaires.</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <select class="chosen-select" id="survQnine">
              <option value="" disabled selected></option>
              <option value="1">1 (strongly disagree)</option>
              <option value="2">2</option>
              <option value="3">3 (meh)</option>
              <option value="4">4</option>
              <option value="5">5 (strongly agree)</option>
            </select>
            <label>I love staying out until sunrise.</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <select class="chosen-select" id="survQten">
              <option value="" disabled selected></option>
              <option value="1">1 (strongly disagree)</option>
              <option value="2">2</option>
              <option value="3">3 (meh)</option>
              <option value="4">4</option>
              <option value="5">5 (strongly agree)</option>
            </select>
            <label>I rely more on knowledge than imagination.</label>
          </div>
        </div>
        </form>
      </div>

    <!-- Submit Button -->
    <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>
      Submit</button>

     <hr>
     <footer class="footer">
       <div class="container">
         <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/afhaque/friendfinder">GitHub Repo</a></p>
       </div>
     </footer>

   </div>

   <!-- Modal -->
   <div id="results-modal" class="modal fade" role="dialog">
     <div class="modal-dialog">

       <!-- Modal content-->
       <div class="modal-content">
         <div class="modal-header">
           <button type="button" class="close" data-dismiss="modal">&times;</button>
           <h2 class="modal-title"><strong>Best Match</strong></h2>
         </div>
         <div class="modal-body">
           <h2 id="match-name"></h2>
           <img id="match-img" alt="profile pic">
         </div>
         <div class="modal-footer">
           <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
         </div>
       </div>

     </div>
   </div>

  </div>
 </div>


  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
  <script src="materialize/js/materialize.min.js"></script>
  <script src="materialize/js/init.js"></script>

  </body>
</html>

<script type="text/javascript">

    var config = {
      ".chosen-select": {},
      ".chosen-select-deselect": {
        allow_single_deselect: true
      },
      ".chosen-select-no-single": {
        disable_search_threshold: 10
      },
      ".chosen-select-no-results": {
        no_results_text: "Oops, nothing found!"
      },
      ".chosen-select-width": {
        width: "95%"
      }
    };

    for (var selector in config) {
      $(selector).chosen(config[selector]);
    };


   $("#submit").on("click", function(event) {
    event.preventDefault();
    // Here we grab the form elements
    function validateForm() {
        let isValid = true;
        $(".form-control").each(function() {
          if ($(this).val() === "") {
            isValid = false;
          }
        });

        $(".chosen-select").each(function() {
          if ($(this).val() === "") {
            isValid = false;
          }
        });

        return isValid;
      };

    if (validateForm()) {

      let newfriend = {
        firstName: $("#first_name").val().trim(),
        lastName: $("#last_name").val().trim(),
        picture: $("#picture").val().trim(),
        funFact: $("#fun_fact").val().trim(),
        pQ1: $("#profQone").val().trim(),
        pQ2: $("#profQtwo").val().trim(),
        pQ3: $("#profQthree").val().trim(),
        pQ4: $("#profQfour").val().trim(),
        pQ5: $("#profQfive").val().trim(),
        pQ6: $("#profQsix").val().trim(),
        score: [
          $("#survQone").val().trim(),
          $("#survQtwo").val().trim(),
          $("#survQthree").val().trim(),
          $("#survQfour").val().trim(),
          $("#survQfive").val().trim(),
          $("#survQsix").val().trim(),
          $("#survQseven").val().trim(),
          $("#survQeight").val().trim(),
          $("#survQnine").val().trim(),
          $("#survQten").val().trim()
          ]
        };

      console.log(newFriend);

      $.post("/api/friends", newFriend, function(data) {

        $("#match-name").text(data.firstName + " " + data.lastName);
        $("#match-img").attr("src", data.picture);
        $("#match-funFact").text(data.funFact);
        $("#match-pQ1").text(data.pQ1);
        $("#match-pQ2").text(data.pQ2);
        $("#match-pQ3").text(data.pQ3);
        $("#match-pQ4").text(data.pQ4);
        $("#match-pQ5").text(data.pQ5);
        $("#match-pQ6").text(data.pQ6);

        $("#results-modal").modal("toggle");

      });
    } else {
      alert("Please fill out all fields!");
    }
  });

    // $.post("/api/tables", newFriend,
    //   function(data) {

    //     // Clear the form when submitting
    //     $("#reserve-name").val("");
    //     $("#reserve-phone").val("");
    //     $("#reserve-email").val("");
    //     $("#reserve-unique-id").val("");

    //   });
